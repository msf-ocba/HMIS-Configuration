<!--   
   Copyright (c) 2016.
 
   This file is part of Project Configuration for MSF.
 
   Project Configuration is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
 
   Project Configuration is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
 
   You should have received a copy of the GNU General Public License
   along with Project Configuration.  If not, see <http://www.gnu.org/licenses/>. -->


<br/>

<div class="row">
<div class="col-md-11">
<div class="panel panel-default">
<div class="panel-body">

<div ng-hide="showfields" class="col-md-12">
<div class="panel panel-default">
    <div class="panel-heading">
        <div class="row">
            <div class="col-md-10">
                {{'PROJECT_DETAILS' | translate}}
            </div>

            <div class="col-md-2">
                <div class="text-right">
                    <a href="#/Project" ng-click="enableforEdit()">
                        <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                    </a>
                    <a href="#/Project" ng-click="modalDelete()">
                        <span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
                    </a>
                </div>
            </div>

        </div>
    </div>
	<div class="panel-body">
		<div class="row">
			<div class="col-md-12">
				<div class="row">
					<div class="col-md-12">
						<label for="InputName2">{{'PROJECT_NAME' | translate}}</label>
                        <d2-findorganisationunit field="name" value="{{projectname}}" operation="{{operation}}" placeholder="{{'PROJECT_NAME' | translate}}"></d2-findorganisationunit>
					</div>
				</div>
				<br/>
				<div class="row">

					<div class="col-md-4">
						<label for="InputName3">{{'PROJECT_OPENING_DATE' | translate}}</label>
						<p class="input-group">												
						
						<input type="text" class="form-control" datepicker-popup="yyyy-MM-dd" ng-model="projectcreated" is-open="openedproject" min-date="minDate" datepicker-options="dateOptions" ng-disabled="operation=='show'" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" />
						
						<span class="input-group-btn">
                        	<button type="button" class="btn btn-default" ng-click="openprojectdate($event)" ng-disabled="operation=='show'"><i class="glyphicon glyphicon-calendar"></i></button>
                        </span>
                        </p>
					</div>
					
					<div class="col-md-6">
						<label for="InputName4">{{'PROJECT_CODE' | translate}}</label>
                        <d2-findorganisationunit field="code" value="{{projectcode}}" operation="{{operation}}" placeholder="{{'PROJECT_CODE' | translate}}"></d2-findorganisationunit>
					</div>
					
					
				</div>
			</div>
		</div>
		<br/>
		<div class="row">
			<div class="col-md-12">
			
				<div class="row">
					<div class="col-md-4">
						<label for="sel12"> {{'PROJECT_TYPE' | translate }} </label>
						<d2-dropdownorgunitgroupset uidgroupSet="{{projectTypeId}}" operation="{{operation}}"></d2-dropdownorgunitgroupset>
					</div>
				
					<div class="col-md-4">
						<label for="sel12"> {{'POPULATION_TYPE' | translate }} </label>
						<d2-dropdownorgunitgroupset uidgroupSet="{{populationTypeId}}" operation="{{operation}}"></d2-dropdownorgunitgroupset>
					</div>

					<div class="col-md-4">
						<label for="sel12"> {{'TYPE_OF_MANAGEMENT' | translate }} </label>
						<d2-dropdownorgunitgroupset uidgroupSet="{{typeManagementId}}" operation="{{operation}}"></d2-dropdownorgunitgroupset>
					</div>
				</div>								
			
			</div>
		</div>
				
		
		<br/>
		<div class="row">
			<div class="col-md-12">
			
				<div class="row">
					<div class="col-md-4">
						<label for="sel12"> {{'EVENTS' | translate }} </label>
						<d2-dropdownorgunitgroupset uidgroupSet="{{gsEventId}}" operation="{{operation}}"></d2-dropdownorgunitgroupset>
					</div>
				
					<div class="col-md-4">
						<label for="sel12"> {{'CONTEXT' | translate }} </label>
						<d2-dropdownorgunitgroupset uidgroupSet="{{gsContextId}}" operation="{{operation}}"></d2-dropdownorgunitgroupset>
					</div>

				</div>								
			
			</div>
		</div>
		
		
		
		</div>
	</div>
</div>
    <div class="row" ng-show="operation=='edit'">
        <div class="col-md-6">

        </div>

        <div class="col-md-6 text-right">
            <button ng-click="EditProject()" type="button" class="btn btn-primary btn-sm">{{'PROJECT_SAVE' | translate}}</button>
            <button type="button" class="btn btn-danger btn-sm" ng-click="enableforshow()">{{'PROJECT_CANCEL' | translate}}</button>
        </div>

    </div>
    <div class="row">
        <div class="col-md-12">
            <alert ng-repeat="message in messages" type="{{message.type}}" close="closeAlertMessage($index)">{{message.text}}</alert>
        </div>
    </div>

		<div class="row">
		<div class="col-md-12">
			<div class="col-md-9">
			</div>
			<div class="col-md-3">
				<h2>	<button ng-click="showForm(1)" type="button" class="btn btn-primary">{{'HEALTHSITE_CREATE' | translate}}</button></h2>
			</div>
		</div>
		</div>

<br/>


<div ng-show="frmSite" class="col-md-12">

<div class="panel panel-default">
  <div class="panel-heading">{{'HEALTHSITE_TITLE' | translate}}</div>
  <div class="panel-body">
  	<div class="row">
		<div class="col-md-12">
			<div class="row">
				<div class="col-md-12">
					<label for="InputName2">{{'HEALTHSITE_NAME' | translate}}</label>
					<d2-findorganisationunit field="name" placeholder="{{'HEALTHSITE_NAME' | translate}}" id="hsname" ></d2-findorganisationunit>
				</div>
			</div>
			
			<br/>
			
			<div class="row">
				<div class="col-md-4">
					<label for="InputName2">{{'HEALTHSITE_OPENING_DATE' | translate}}</label>
					<p class="input-group">
           		    <input type="text" class="form-control" datepicker-popup="yyyy-MM-dd" ng-model="siteDate" is-open="openedsite" min-date="minDate" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" />
              		<span class="input-group-btn">
                		<button type="button" class="btn btn-default" ng-click="opensitedate($event)"><i class="glyphicon glyphicon-calendar"></i></button>
              		</span>
            		</p>
				</div>
				

               <div class="col-md-4">
					<label for="sel12"> {{'HEALTHSITE_TYPE' | translate }} </label>
					<d2-dropdownorgunitgroupset uidgroupSet="{{siteTypeId}}" id="healthsitetype"></d2-dropdownorgunitgroupset>
				</div>
                <div class="col-md-2 ">
                    <div class="row">
                        <label for="sel12">   {{'HEALTHSITE_PREFIX' | translate}}</label>
                    </div>
                    <div class="row">
                        <div class="col-md-7">
                            <input ng-model="siteprefix" type="text" class="form-control" id="SitePrefix" ng-change="validateLength()">
                        </div>
                        <div class="col-md-5">
                            <button type="button" class="btn btn-default btn-warning" aria-label="Advertencia" ng-show="alertlength" ng-click="alertlength = false">
                                <span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>
                                {{ 'ALARM_LENGTH' | translate }}
                            </button>
                        </div>
                    </div>

                </div>
								
			</div>
			
            <div class="row">
                       		 
            	<div class="col-md-6">
                	<label for="InputName2">{{'SITE_USER' | translate}}</label>
		            	<d2-finduser placeholder="{{'PROJECT_USER' | translate}}" id="usernameproject"></d2-finduser>
		        </div>                        
                        
            </div>
			
			
			
		</div>
	</div>
      <div class="col-md-12">
          <div class="row">
          </div>
      </div>


<br>
<div class="row">
		<div class="col-md-6">
			<button ng-click="sitesave()" type="button" ng-disabled="alertlength" class="btn btn-primary">{{'HEALTHSITE_SAVE' | translate}} </button>
		</div>

		<div class="col-md-6">
			<button type="button" class="btn btn-danger" ng-click="hideForm()">{{'HEALTHSITE_CANCEL' | translate}} </button>
		</div>
</div>
</div>
</div>
</div>

</div>
</div>
</div>
</div>

<d2-modaldialogbox></d2-modaldialogbox>